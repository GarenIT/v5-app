!function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=96)}({0:function(e,t,a){"use strict";function n(e,t,a,n,i,o,r,s,p,u){var l,c="function"==typeof e?e.options:e;if(p){c.components||(c.components={});var f=Object.prototype.hasOwnProperty;for(var d in p)f.call(p,d)&&!f.call(c.components,d)&&(c.components[d]=p[d])}if(u&&((u.beforeCreate||(u.beforeCreate=[])).unshift((function(){this[u.__module]=this})),(c.mixins||(c.mixins=[])).push(u)),t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=l):i&&(l=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var h=c.render;c.render=function(e,t){return l.call(t),h(e,t)}}else{var g=c.beforeCreate;c.beforeCreate=g?[].concat(g,l):[l]}return{exports:e,options:c}}a.d(t,"a",(function(){return n}))},1:function(e,t){e.exports={"@VERSION":2}},10:function(e,t,a){Vue.prototype.__$appStyle__={},Vue.prototype.__merge_style&&Vue.prototype.__merge_style(a(11).default,Vue.prototype.__$appStyle__)},11:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},13:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n="http://v3api.yiyukj.com",i="abc123456",o=function(){var e=uni.getStorageSync("nowDomain_"+i);return e||n},r=o(),s=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];plus.sqlite.executeSql({name:e,sql:t,success:function(t){0!=a&&plus.sqlite.executeSql({name:e,sql:a,success:function(e){},fail:function(e){}})},fail:function(e){}})},p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i="",o=a;if(t)var r=["0","1","2","3","4","5","6","7","8","9"];else r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];e&&(o=Math.round(Math.random()*(n-a))+a);for(var s=0;s<o;s++){var p=Math.round(Math.random()*(r.length-1));i+=r[p]}return i},u=function(e){if(!e)return!1;var t=e.split("/");return t[t.length-1]},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";uni.showToast({icon:a,title:e,mask:!0,duration:t,image:n})},c=function(e){try{var t=e;return t<1048576?(t/1024).toFixed(2):1048576==t?1:t>1048576&&t<1073741824?(t/1048576).toFixed(2):t>1048576&&1073741824==t?"1GB":t>1073741824&&t<1099511627776?(t/1073741824).toFixed(2):"\u6587\u4ef6\u8d85\u8fc71TB"}catch(e){return!1}},f=function(){var e=uni.getStorageSync("my_did_abc123456");if(e)return e;var t=p(!1,!1,16,16);return uni.setStorageSync("my_did_abc123456","H5"+t),t},d=null,h={appkey:i,apiUrl:n,apiData:{appInits:r+"/appapi/appInit/appkey/"+i,getVersion:r+"/appapi/getVersion/appkey/"+i,homeData:r+"/appapi/homeMain/appkey/"+i,videoData:r+"/appapi/videoList/appkey/"+i,getAlbum:r+"/appapi/albumInfo/appkey/"+i,videoInfo:r+"/appapi/detail/appkey/"+i,addCollection:r+"/appapi/addCollection/appkey/"+i,videoLike:r+"/appapi/like/appkey/"+i,addComment:r+"/appapi/comment/appkey/"+i,commentList:r+"/appapi/commentList/appkey/"+i,heartBeat:r+"/appapi/heartbeat/appkey/"+i,userLogin:r+"/appapi/login/appkey/"+i,getConfig:r+"/appapi/getConfig/appkey/"+i,userReg:r+"/appapi/register/appkey/"+i,getMobileCode:r+"/appapi/getMobileCode/appkey/"+i,getInfo:r+"/appapi/getUserInfo/appkey/"+i,userSign:r+"/appapi/userSign/appkey/"+i,myBalance:r+"/appapi/balance/appkey/"+i,getMoney:r+"/appapi/getMoney/appkey/"+i,getBank:r+"/appapi/bankLists/appkey/"+i,getUserBank:r+"/appapi/userBankList/appkey/"+i,setBank:r+"/appapi/setDefaultBank/appkey/"+i,delBank:r+"/appapi/delBank/appkey/"+i,addBank:r+"/appapi/addBank/appkey/"+i,getDeposit:r+"/appapi/depositLog/appkey/"+i,getDetailed:r+"/appapi/detailedList/appkey/"+i,editInfo:r+"/appapi/editInfo/appkey/"+i,upload:r+"/appapi/upload/appkey/"+i,getColl:r+"/appapi/collectionList/appkey/"+i,delColl:r+"/appapi/deleteCollection/appkey/"+i,getWatchLog:r+"/appapi/getWatchLog/appkey/"+i,delWatchLog:r+"/appapi/delWatchLog/appkey/"+i,myShare:r+"/appapi/myShare/appkey/"+i,getShareLog:r+"/appapi/shareLog/appkey/"+i,changePwd:r+"/appapi/changePwd/appkey/"+i,getCharge:r+"/appapi/getChargeData/appkey/"+i,getPayList:r+"/appapi/getPayList/appkey/"+i,createOrder:r+"/appapi/createOrder/appkey/"+i,getAbout:r+"/appapi/getAbout/appkey/"+i,getGameList:r+"/appapi/getGameList/appkey/"+i,getPrize:r+"/appapi/getPrize/appkey/"+i,buyVideo:r+"/appapi/buy/appkey/"+i,getHotSearch:r+"/appapi/getHotSearch/appkey/"+i,searchVideo:r+"/appapi/searchVideo/appkey/"+i,emptySearch:r+"/appapi/emptySearch/appkey/"+i,getAd:r+"/appapi/getAd/appkey/"+i,getSharePid:r+"/appapi/getSharePid/appkey/"+i,uploadImg:r+"/appapi/uploadImg/appkey/"+i,getPlazaList:r+"/appapi/communityHomepage/appkey/"+i,getComment:r+"/appapi/getPostComment/appkey/"+i,getAdInfo:r+"/appapi/getAdInfo/appkey/"+i,sendComment:r+"/appapi/sendPostComment/appkey/"+i,homePage:r+"/appapi/homePage/appkey/"+i,uploadConfig:r+"/appapi/getUploadConfig/appkey/"+i,getTopMenu:r+"/appapi/getTopMenu/appkey/"+i,getAnchorList:r+"/appapi/getAnchorList/appkey/"+i,buyGoldRoom:r+"/appapi/buyGoldRoom/appkey/"+i,getUserAnchor:r+"/appapi/getUserIsAnchor/appkey/"+i,regAnchor:r+"/appapi/regAnchor/appkey/"+i,playerConfig:r+"/appapi/enterTheStudio/appkey/"+i,focusAnchor:r+"/appapi/focusOnTheAnchor/appkey/"+i,logoutRoom:r+"/appapi/exitTheStudio/appkey/"+i,giveAnchor:r+"/appapi/rewardTheAnchor/appkey/"+i,liveInitData:r+"/appapi/startLiveBroadcast/appkey/"+i,saveRoomData:r+"/appapi/saveRoomData/appkey/"+i,roomUploadImg:r+"/appapi/roomUploadImg/appkey/"+i,endLivePlayer:r+"/appapi/endLiveBroadcast/appkey/"+i,updateSendMs:r+"/appapi/updateSendMs/appkey/"+i,anchorOutUser:r+"/appapi/anchorOutUser/appkey/"+i,getPicture:r+"/appapi/getPicture/appkey/"+i,buyPicture:r+"/appapi/buyPicture/appkey/"+i,pictureInfo:r+"/appapi/pictureInfo/appkey/"+i,openH5Url:r+"/appapi/openH5Url/appkey/"+i,updateTryTime:r+"/appapi/updateTryTime/appkey/"+i,getAlbumList:r+"/appapi/getAlbumList/appkey/"+i,getPay:r+"/appapi/pay",agreement:r+"/appapi/privacy/type/1",privacy:r+"/appapi/privacy/type/2"},getLogins:function(){try{var e=uni.getStorageSync("userInfo_"+i);return e||!1}catch(e){return!1}},setLogins:function(e){try{return uni.setStorageSync("userInfo_"+i,e),!0}catch(e){return!1}},delLogins:function(){try{return uni.removeStorageSync("userInfo_"+i),!0}catch(e){return!1}},randomWord:p,downVideo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a="video",n='create table if not exists downVideoList("userid" INT(11),"videoid" INT(11),"videotitle" CHAR(100),"videourl" CHAR(100),"poster" CHAR(100),"videosize" CHAR(50),"downsize" CHAR(50),"downkb" CHAR(50),"videoing" INT(11),"starttostop" INT(1),"downstatus" INT(1),"delstatus" INT(1))';if(1==t)var i="insert into downVideoList values('"+e.userId+"','"+e.videoId+"','"+e.videoTitle+"','"+e.videoUrl+"','"+e.poster+"','"+e.videoSize+"','0','\u51c6\u5907\u5c31\u7eea','0','1','0','1')";else i=e;s(a,n,i)},delDown:function(e,t,a,n){s("video",'create table if not exists downVideoList("userid" INT(11),"videoid" INT(11),"videotitle" CHAR(100),"videourl" CHAR(100),"poster" CHAR(100),"videosize" CHAR(50),"downsize" CHAR(50),"downkb" CHAR(50),"videoing" INT(11),"starttostop" INT(1),"downstatus" INT(1),"delstatus" INT(1))',"delete from downVideoList where videoid="+t+" and userid="+e),1==n&&plus.io.resolveLocalFileSystemURL(a,(function(e){e.remove((function(e){}),(function(e){}))}))},openDb:function(e){plus.sqlite.openDatabase({name:e,path:"_doc/video_"+i+".db",success:function(e){},fail:function(e){}})},closeDb:function(e){plus.sqlite.closeDatabase({name:e,success:function(e){},fail:function(e){}})},createTable:function(){s("video",'create table if not exists downVideoList("userid" INT(11),"videoid" INT(11),"videotitle" CHAR(100),"videourl" CHAR(100),"poster" CHAR(100),"videosize" CHAR(50),"downsize" CHAR(50),"downkb" CHAR(50),"videoing" INT(11),"starttostop" INT(1),"downstatus" INT(1),"delstatus" INT(1))')},imgCache:function(e,t){var a=u(e)+i+"",n=uni.getStorageSync(a);n?(plus.io.resolveLocalFileSystemURL(n,(function(e){e.file((function(e){}))}),(function(e){uni.removeStorageSync(a)})),t(n)):(t(e),uni.downloadFile({url:e,success:function(e){200==e.statusCode&&uni.saveFile({tempFilePath:e.tempFilePath,success:function(e){var t=e.savedFilePath;uni.setStorageSync(a,t)}})}}))},splitUrl:u,showToast:l,getFileSize:c,getWebDomain:o,getMobileDid:function(e){var t=uni.getSystemInfoSync(),a=t.deviceId||0;a.length>0?e(a):plus.device.getInfo({success:function(e){if("android"==t.platform){var n=e.uuid.split(",");a=n[0]}else a=e.uuid},fail:function(e){a=f()},complete:function(t){e(a)}})},outApp:function(){switch(uni.getSystemInfoSync().platform){case"android":plus.runtime.quit();break;case"ios":plus.ios.import("UIApplication").sharedApplication().performSelector("exit")}},jumpUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"web",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if("#"==e||""==e)return!1;switch(t){case"old":uni.reLaunch({url:e});break;case"new":uni.navigateTo({url:e});break;case"tab":uni.switchTab({url:e});break;case"newx":uni.redirectTo({url:e});break;case"back":uni.navigateBack({delta:a});break;case"app":var n="/pages/jump/index?u="+e;uni.navigateTo({url:n});break;default:plus.runtime.openURL(e)}},copy:function(e){var t=e+"";uni.setClipboardData({data:t,success:function(){l("\u590d\u5236\u6210\u529f",2e3)}})},createView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"50px",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0.3",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";d=new plus.nativeObj.View("bg",{bottom:"0px",left:"0px",height:e,width:"100%",opacity:t,backgroundColor:"rgba(0,0,0,1)"}),""!=a&&d.drawText(a,{widht:"100%",height:"100%"},{size:"18px",color:"#fff"}),d.show()},closeView:function(){d.close()},callUp:function(e){uni.makePhoneCall({phoneNumber:e+"",fail:function(){api.showToast("\u64cd\u4f5c\u5931\u8d25",2e3)}})},getContacts:function(e){plus.contacts.getAddressBook(plus.contacts.ADDRESSBOOK_PHONE,(function(t){t.find(["displayName","phoneNumbers"],(function(t){e(t)}),(function(){e(!1)}),{multiple:!0})}),(function(t){e(!1)}))},formatSeconds:function(e){var t=parseInt(e),a=Math.floor(t/3600)<10?"0"+Math.floor(t/3600):Math.floor(t/3600),n=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),i=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60),o="";return o+="".concat(a,":"),o+="".concat(n,":"),o+="".concat(i)},nowUrl:r,getWebFileSize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=0;e.length<1?t(a):uni.request({url:e,method:"HEAD",success:function(e){200==e.statusCode&&(a=c(e.header["Content-Length"]))},complete:function(){t(a)}})},isH5:function(){return{type:"app",ver:0}}};t.default=h},18:function(e,t,a){"use strict";function n(e){var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1)}function i(){return"string"==typeof __channelId__&&__channelId__}function o(e,t){switch(n(t)){case"Function":return"function() { [native code] }";default:return t}}Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];console[e].apply(console,a)},t.default=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=t.shift();if(i())return t.push(t.pop().replace("at ","uni-app:///")),console[r].apply(console,t);var s=t.map((function(e){var t=Object.prototype.toString.call(e).toLowerCase();if("[object object]"===t||"[object array]"===t)try{e="---BEGIN:JSON---"+JSON.stringify(e,o)+"---END:JSON---"}catch(a){e=t}else if(null===e)e="---NULL---";else if(void 0===e)e="---UNDEFINED---";else{var a=n(e).toUpperCase();e="NUMBER"===a||"BOOLEAN"===a?"---BEGIN:"+a+"---"+e+"---END:"+a+"---":String(e)}return e})),p="";if(s.length>1){var u=s.pop();p=s.join("---COMMA---"),0===u.indexOf(" at ")?p+=u:p+="---COMMA---"+u}else p=s[0];console[r](p)}},23:function(e,t,a){"use strict";var n=a(66),i=a(45),o=a(0);var r=Object(o.a)(i.default,n.b,n.c,!1,null,null,"14c36347",!1,n.a,void 0);(function(e){this.options.style||(this.options.style={}),Vue.prototype.__merge_style&&Vue.prototype.__$appStyle__&&Vue.prototype.__merge_style(Vue.prototype.__$appStyle__,this.options.style),Vue.prototype.__merge_style?Vue.prototype.__merge_style(a(84).default,this.options.style):Object.assign(this.options.style,a(84).default)}).call(r),t.default=r.exports},45:function(e,t,a){"use strict";var n=a(46),i=a.n(n);t.default=i.a},46:function(module,exports,__webpack_require__){"use strict";(function(__f__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(97)),_api=_interopRequireDefault(__webpack_require__(13)),_self,socketTask,pingTime;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncGeneratorStep(e,t,a,n,i,o,r){try{var s=e[o](r),p=s.value}catch(e){return void a(e)}s.done?t(p):Promise.resolve(p).then(n,i)}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var o=e.apply(t,a);function r(e){asyncGeneratorStep(o,n,i,r,s,"next",e)}function s(e){asyncGeneratorStep(o,n,i,r,s,"throw",e)}r(void 0)}))}}var is_open_socket=!1,_default={components:{},data:function(){return{isLogin:!1,userId:0,phone:{},loadingHieght:100,isCheck:!1,isBtn:!1,aid:0,setTing:{playerName:"",playerGold:0,playerImg:""},playerImg:"",lingText:[],playerSetting:{mode:"SD",whiteness:0,beauty:0},context:{},playerUrl:"",startUrl:"",server:{ipUrl:""},did:"",userInfo:{id:0,isVip:!1,username:"loading...",gold:0,isDisable:!1,headImg:""},isShowPlaer:!0,videoContext:{},playerMuted:!1,backUrl:{url:"/pages/live/list",type:"newx"},anchorCover:"",isAnchorCover:!0,objectFit:"cover"}},onLoad:function onLoad(e){_self=this,_self.isLogin=_api.default.getLogins(),_self.isLogin&&(_self.userId=_self.isLogin.userId),_self.phone=uni.getSystemInfoSync(),"ios"==_self.phone.platform&&plus.navigator.hasNotchInScreen()?_self.objectFit="fill":_self.objectFit="cover",_self.loadingHieght=_self.phone.windowHeight+20,_self.aid=1==e.t?0:e.aid,null!=e.url&&(_self.backUrl=JSON.parse(e.url)),uni.setStorageSync("anchor_id_"+_api.default.appkey,_self.aid),_api.default.getMobileDid((function(e){_self.did=e,_self.initPlayer()})),uni.$on("getSubnvueParam",(function(data){if("livePlayerStatus"==data.type&&eval(data.data),"playerSetting"==data.type){var d=data.data.data;1==data.data.type?eval(d):_self.playerSetting=d}"roomSetting"==data.type&&(_self.setTing=data.data,_self.hideLiveSubNVue("live_setting"),_self.startPreview())}))},onReady:function(){0==_self.aid&&(_self.context=uni.createLivePusherContext("livePusher",_self))},onShow:function(){0!=_self.aid&&(_self.setLiveStatus(!0),uni.$emit("getSubnvueParam",{type:"toHeadBackFun",data:"_self.tryTimeDsq(1)"}))},onHide:function(){0!=_self.aid&&(_self.setLiveStatus(!1),uni.$emit("getSubnvueParam",{type:"toHeadBackFun",data:"_self.tryTimeDsq(0)"})),_self.isAnchorCover=!0},onUnload:function(){_self.closeConnectToServer()},onBackPress:function(e){return uni.$emit("getSubnvueParam",{type:"backList",data:_self.aid}),!0},methods:{loadedmetadata:function(e){_self.objectFit=e.detail.width>=e.detail.height?"contain":"fill"},setLiveStatus:function(e){_self.isShowPlaer=e},playLoad:function(){setTimeout((function(){_self.isAnchorCover=!1,_self.hideLiveSubNVue("live_loading")}),500)},initPlayer:function(){var e=uni.getStorageSync("server_ipUrl_"+_api.default.appkey);e&&(_self.server.ipUrl=e),0==_self.aid?_self.getAnchorData():_self.getClientData()},connectToServer:function(){0!=_self.server.ipUrl.length?((socketTask=uni.connectSocket({url:_self.server.ipUrl,fail:function(){_self.backList("\u8fde\u63a5\u6d88\u606f\u670d\u52a1\u5668\u5931\u8d252")}})).onOpen((function(e){is_open_socket=!0,socketTask.onMessage((function(e){var t=JSON.parse(e.data);switch(t.type){case"init":var a={type:"bid",data:{did:_self.did,time:5,id:_self.userId,isVip:_self.userInfo.isVip,username:_self.userInfo.username,headImg:_self.userInfo.headImg,isDisable:_self.userInfo.isDisable},web:0==_self.aid?_api.default.apiData.endLivePlayer:_api.default.apiData.logoutRoom,anchorId:_self.aid};_self.sendSocketTask(a);break;case"msg":if(t.anchorId==_self.aid||t.anchorId==_self.userId){if(1==t.data.type)var n="_self.addSysNotice("+JSON.stringify(t.data.content)+")";else n="_self.userSendMsg("+JSON.stringify(t.data)+")";uni.$emit("getSubnvueParam",{type:"backFun",data:n})}break;case"userLogout":t.anchorId!=_self.aid&&t.anchorId!=_self.userId||uni.$emit("getSubnvueParam",{type:"outUser",data:t.data});break;case"giveGift":if(t.anchorId==_self.aid||t.anchorId==_self.userId){n="_self.userGiveGift("+JSON.stringify(t.data.item)+")";uni.$emit("getSubnvueParam",{type:"backFun",data:n}),uni.$emit("getSubnvueParam",{type:"giveGiftOrder",data:t.data.orderList})}break;case"endLive":t.anchorId==_self.aid&&(_self.isShowPlaer=!1,uni.showModal({content:"\u672c\u6b21\u76f4\u64ad\u5df2\u7ed3\u675f\uff0c\u4e0b\u671f\u4e0d\u89c1\u4e0d\u6563",showCancel:!1,confirmText:"\u786e\u5b9a\u8fd4\u56de",success:function(e){e.confirm&&_self.skipUrl("/pages/live/list","newx")}}));break;case"userFocus":var i={detail:{message:(t.data.isVip?"VIP":"")+"["+t.data.username+"]\u5173\u6ce8\u4e86\u60a8"}};_self.statechange(i);break;case"kickOutAnchor":n="_self.kickOutAnchor("+JSON.stringify(t)+")";uni.$emit("getSubnvueParam",{type:"backFun",data:n});break;case"login":t.anchorId!=_self.aid&&t.anchorId!=_self.userId||uni.$emit("getSubnvueParam",{type:"inUser",data:t.data});break;default:t.anchorId==_self.aid&&uni.$emit("getSubnvueParam",{type:t.type,data:t})}}))})),setTimeout((function(){is_open_socket||_self.backList("\u8fde\u63a5\u6d88\u606f\u670d\u52a1\u5668\u5931\u8d253")}),1e4),pingTime=setInterval((function(){_self.pongToServer()}),9e3)):_self.backList("\u8fde\u63a5\u6d88\u606f\u670d\u52a1\u5668\u5931\u8d251")},pongToServer:function(){_self.sendSocketTask({type:"pong"})},sendSocketTask:function(e){is_open_socket&&socketTask.send({data:JSON.stringify(e),success:function(){return _asyncToGenerator(_regenerator.default.mark((function t(){return _regenerator.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:__f__("log",e," at pages/live/player.nvue:344");case 1:case"end":return t.stop()}}),t)})))()}})},closeConnectToServer:function(){socketTask.close({success:function(e){is_open_socket=!1,clearInterval(pingTime)}})},showLiveSubNVue:function(e){uni.getSubNVueById(e).show("slide-in-bottom",10)},hideLiveSubNVue:function(e){uni.getSubNVueById(e).hide("slide-in-bottom",10)},statechange:function(e){_self.lingText.push(e.detail.message),_self.lingText.reverse()},netstatus:function(e){},liveError:function(e){_api.default.showToast("\u672a\u77e5\u9519\u8bef\uff0c\u8bf7\u5173\u95edAPP\u91cd\u8bd5",2e3),__f__("log","error:"+JSON.stringify(e)," at pages/live/player.nvue:380")},start:function(){_self.setTing.playerName.length<1?(_self.showLiveSubNVue("live_setting"),_api.default.showToast("\u8bf7\u8bbe\u7f6e\u623f\u95f4\u4fe1\u606f",2e3)):_self.context.start({success:function(e){uni.$emit("getSubnvueParam",{type:"startPlayer",data:1}),0==_self.setTing.playerImg.length?setTimeout((function(){_self.snapshot((function(e){_self.uploadRoomImg(e)}))}),500):_self.uploadRoomImg(_self.setTing.playerImg)}})},pause:function(){_self.context.pause({success:function(e){uni.$emit("getSubnvueParam",{type:"startPlayer",data:2})}})},resume:function(){_self.context.resume({success:function(e){uni.$emit("getSubnvueParam",{type:"startPlayer",data:1})}})},snapshot:function(e){_self.context.snapshot({success:function(t){var a=t.message.tempImagePath.split("/"),n="_doc/snapshot/"+a[a.length-1];e(n)}})},stop:function(){_self.context.stop({success:function(e){uni.$emit("getSubnvueParam",{type:"startPlayer",data:0})}})},switchCamera:function(){_self.context.switchCamera({success:function(e){}})},startPreview:function(){_self.context.startPreview({success:function(e){}})},uploadRoomImg:function uploadRoomImg(img){var imgs=[{name:"imgs[0]",uri:img}],uper=uni.uploadFile({url:_api.default.apiData.roomUploadImg,files:imgs,formData:{uid:_self.userId,roomName:_self.setTing.playerName,roomGold:_self.setTing.playerGold,tryTime:_self.setTing.tryTime},success:function success(e){var d=eval("("+e.data+")");200==d.Code?(_self.playerImg=d.Data,0==_self.setTing.playerImg.length&&_self.snapshot((function(e){setTimeout((function(){_self.uploadRoomImg(e)}),6e4)}))):_self.backList(r.Msg)},fail:function(){_api.default.showToast("\u4e0a\u4f20\u5373\u65f6\u5c01\u9762\u5931\u8d25")}});uper.onProgressUpdate((function(e){}))},videoErrorCallback:function(){},getAnchorData:function(){uni.request({url:_api.default.apiData.liveInitData,method:"POST",data:{uid:_self.userId},header:{"Content-type":"application/x-www-form-urlencoded"},success:function(e){var t=e.data;if(200==t.Code){var a=t.Data;_self.startUrl=a.startUrl,a.id=_self.userId,a.playerTime=0,__f__("log",_self.startUrl," at pages/live/player.nvue:528");var n="_self.setMinTrytime("+a.minTryTime+")";uni.$emit("getSubnvueParam",{type:"liveSetting",data:n}),uni.$emit("getSubnvueParam",{type:"anchorToHead",data:a}),uni.$emit("getSubnvueParam",{type:"anchor",data:_self.userId}),_self.connectToServer()}else _api.default.showToast(t.Msg,3e3)},fail:function(){_self.backList("\u670d\u52a1\u5668\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u662f\u5426\u6b63\u5e38")},complete:function(){_self.hideLiveSubNVue("live_loading"),_self.showLiveSubNVue("live_setting")}})},getClientData:function(){uni.request({url:_api.default.apiData.playerConfig,method:"POST",data:{uid:_self.userId,aid:_self.aid,sys:_self.phone.platform},header:{"Content-type":"application/x-www-form-urlencoded"},success:function(e){var t=e.data;if(200==t.Code){var a=t.Data;_self.playerUrl=a.anchorInfo.playerUrl,_self.anchorCover=a.anchorInfo.anchorCover,_self.userInfo=a.userInfo,__f__("log",a.anchorInfo," at pages/live/player.nvue:570");var n={onlineNum:a.onlineNum,anchorInfo:a.anchorInfo,isFocus:a.isFocus,giftOrder:a.giftOrder,otherParam:{aid:_self.aid,uid:_self.userId},userInfo:_self.userInfo},i={giftList:a.giftList,userInfo:_self.userInfo,sysNotice:a.sysNotice},o="_self.getGiftList("+JSON.stringify(i)+")";uni.$emit("getSubnvueParam",{type:"backFun",data:o}),uni.$emit("getSubnvueParam",{type:"toHead",data:n}),uni.$emit("getSubnvueParam",{type:"anchorId",data:_self.aid}),_self.connectToServer()}else _self.backList(t.Msg)},fail:function(){_self.backList("\u670d\u52a1\u5668\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u662f\u5426\u6b63\u5e38")},complete:function(){}})},backList:function(e){_api.default.showToast(e,2e3),setTimeout((function(){_self.skipUrl(_self.backUrl.url,_self.backUrl.type),_self.isShowPlaer=!1}),1500)},skipUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/pages/login/login",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"newx";_api.default.jumpUrl(e,t)}}};exports.default=_default}).call(this,__webpack_require__(18).default)},47:function(e,t){e.exports={"player-end":{justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)",width:"750rpx"},"live-text":{color:"#FFFFFF",fontSize:"10",height:"30rpx",lineHeight:"30rpx"},"live-ing":{position:"fixed",top:"75",right:"20rpx",height:"105rpx",backgroundColor:"rgba(0,0,0,0.3)",borderRadius:"20rpx",alignItems:"center",paddingTop:"10rpx",paddingRight:"10rpx",paddingBottom:"10rpx",paddingLeft:"10rpx"},livePusher:{width:"750rpx",position:"fixed",top:0,left:0},"player-video":{width:"750rpx",position:"fixed",top:0,left:0},content:{backgroundColor:"#000000"},"@VERSION":2}},66:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("scroll-view",{staticStyle:{flexDirection:"column"},attrs:{scrollY:!0,showScrollbar:!1,enableBackToTop:!0,bubble:"true"}},[a("view",{staticClass:["content"]},[e.aid>0?a("view",{staticClass:["live-player"]},[e.isShowPlaer?a("u-video",{staticClass:["player-video"],style:{height:e.phone.windowHeight+"px"},attrs:{id:"myVideo",autoplay:!0,controls:!1,loop:!0,muted:e.playerMuted,src:e.playerUrl,enableProgressGesture:!1,objectFit:e.objectFit,poster:e.anchorCover},on:{error:e.videoErrorCallback,play:e.playLoad}},[a("u-scalable",{staticStyle:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0"}},[e.isAnchorCover?a("u-image",{staticClass:["player-end"],style:{height:e.phone.windowHeight+"px"},attrs:{src:e.anchorCover,mode:"aspectFill"}}):e._e()],1)],1):a("cover-image",{staticClass:["player-end"],style:{height:e.phone.windowHeight+"px"},attrs:{src:e.anchorCover,mode:"aspectFill"}})],1):a("view",{staticClass:["live-player"]},[a("live-pusher",{ref:"livePusher",staticClass:["livePusher"],style:{height:e.phone.windowHeight+"px"},attrs:{id:"livePusher",aspect:"9:16",url:e.startUrl,muted:!1,enableCamera:!0,autoFocus:!0,mode:e.playerSetting.mode,beauty:e.playerSetting.beauty,whiteness:e.playerSetting.whiteness},on:{netstatus:e.netstatus,error:e.liveError}}),e.lingText.length>0?a("scroll-view",{staticClass:["live-ing"],attrs:{scrollY:"true",showScrollbar:!1}},e._l(e.lingText,(function(t,n){return a("u-text",{key:n,staticClass:["live-text"],appendAsTree:!0,attrs:{append:"tree"}},[e._v(e._s(t))])})),0):e._e()],1)])])},i=[]},84:function(e,t,a){"use strict";a.r(t);var n=a(47),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t.default=i.a},96:function(e,t,a){"use strict";a.r(t);a(10);var n=a(23);"undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=this.constructor;return this.then((function(a){return t.resolve(e()).then((function(){return a}))}),(function(a){return t.resolve(e()).then((function(){throw a}))}))}),n.default.mpType="page",n.default.route="pages/live/player",n.default.el="#root",new Vue(n.default)},97:function(e,t,a){e.exports=a(98)},98:function(e,t,a){var n=function(e){"use strict";var t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",r=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,a){return e[t]=a}}function p(e,t,a,n){var i=t&&t.prototype instanceof c?t:c,o=Object.create(i.prototype),r=new w(n||[]);return o._invoke=function(e,t,a){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return L()}for(a.method=i,a.arg=o;;){var r=a.delegate;if(r){var s=b(r,a);if(s){if(s===l)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var p=u(e,t,a);if("normal"===p.type){if(n=a.done?"completed":"suspendedYield",p.arg===l)continue;return{value:p.arg,done:a.done}}"throw"===p.type&&(n="completed",a.method="throw",a.arg=p.arg)}}}(e,a,r),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}e.wrap=p;var l={};function c(){}function f(){}function d(){}var h={};h[i]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&a.call(y,i)&&(h=y);var v=d.prototype=c.prototype=Object.create(h);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var n;this._invoke=function(i,o){function r(){return new t((function(n,r){!function n(i,o,r,s){var p=u(e[i],e,o);if("throw"!==p.type){var l=p.arg,c=l.value;return c&&"object"==typeof c&&a.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,r,s)}),(function(e){n("throw",e,r,s)})):t.resolve(c).then((function(e){l.value=e,r(l)}),(function(e){return n("throw",e,r,s)}))}s(p.arg)}(i,o,n,r)}))}return n=n?n.then(r,r):r()}}function b(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return f.prototype=v.constructor=d,d.constructor=f,f.displayName=s(d,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,r,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},_(m.prototype),m.prototype[o]=function(){return this},e.AsyncIterator=m,e.async=function(t,a,n,i,o){void 0===o&&(o=Promise);var r=new m(p(t,a,n,i),o);return e.isGeneratorFunction(a)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},_(v),s(v,r,"Generator"),v[i]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=I,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return r.type="throw",r.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],r=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),p=a.call(o,"finallyLoc");if(s&&p){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!p)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var i=n.arg;S(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:I(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}}});