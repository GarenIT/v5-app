(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-member-watch_log"],{"050c":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".moreTig[data-v-5785f382]{text-align:center;color:#ccc;font-size:%?25?%;margin:%?30?% 0 %?50?% 0}.watch-radius[data-v-5785f382]{width:18px;height:18px;background:#ff8f00;float:left;border-radius:50%;margin-left:-11px;margin-top:30px}.video-class[data-v-5785f382]{font-size:13px}.video-time[data-v-5785f382]{font-size:13px}.video-title[data-v-5785f382]{font-size:16px;color:#ccc!important;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;\r\n\t/*background: #1AAD19;\r\n */height:33px;line-height:33px}.video-info uni-view[data-v-5785f382]{width:100%;float:left;color:#999}.video-img uni-image[data-v-5785f382]{width:100%;height:100%;border-radius:10px;box-shadow:0 4px 6px 0 rgba(0,0,0,.5)}.video-img[data-v-5785f382]{width:35%;padding:0 0 0 2%;height:80px}.video-info[data-v-5785f382]{width:58%;float:right}.watch-content uni-view[data-v-5785f382]{display:inline-block}.watch-content[data-v-5785f382]{width:90%;margin:0 5%;border-left:4px solid #ff8f00;padding:5px 0 0 0}.watch-list[data-v-5785f382]{width:100%;padding-bottom:15px}.select[data-v-5785f382]{border-bottom:2px solid #fff;padding-bottom:5px}.content-head[data-v-5785f382]{position:fixed;width:100%;height:30px;line-height:30px;top:27px;text-align:center;color:#fff;z-index:10}.watch-head[data-v-5785f382]{width:100%;text-align:center;background-color:#20202c;position:fixed;z-index:5}.watch-head uni-view[data-v-5785f382]{display:inline-block;width:60px;font-size:16px;color:#fff}.del-log[data-v-5785f382]{background:rgba(0,0,0,.5);padding:5px 2px 5px 8px;border-radius:50px 0 0 50px;position:absolute;right:0}",""]),t.exports=e},"46fc":function(t,e,i){"use strict";i.r(e);var a=i("e58b"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"56b0":function(t,e,i){"use strict";i.r(e);var a=i("ca40"),n=i("46fc");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("5b9c");var s,l=i("f0c5"),r=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"5785f382",null,!1,a["a"],s);e["default"]=r.exports},"5b9c":function(t,e,i){"use strict";var a=i("a273"),n=i.n(a);n.a},a273:function(t,e,i){var a=i("050c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("4e921d35",a,!0,{sourceMap:!1,shadowMode:!1})},ca40:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"bg"},[i("v-uni-view",{staticClass:"content-head",style:{top:t.top+"px"}},[t._v("长视频记录")]),i("v-uni-view",{staticClass:"watch-head",style:{padding:t.top+45+"px 0 5px 0"}},[i("v-uni-view",{class:1==t.tab?"select":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggle(1)}}},[t._v("看过")]),i("v-uni-view",{class:2==t.tab?"select":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggle(2)}}},[t._v("赞过")]),i("v-uni-view",{class:3==t.tab?"select":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toggle(3)}}},[t._v("买过")]),t.isShowDel?i("v-uni-view",{staticClass:"del-log",staticStyle:{"font-size":"12px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delWatch.apply(void 0,arguments)}}},[t._v("清除足迹")]):t._e()],1),i("v-uni-view",{staticClass:"watch-list",style:{padding:t.bgHeight+0+"px 0 0 0"}},[t.isShowTig?t._e():i("v-uni-view",{staticClass:"watch-content"}),t._l(t.logList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"watch-content",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.playVideo(e.videoId)}}},[i("v-uni-view",{staticClass:"watch-radius"}),i("v-uni-view",{staticClass:"video-img"},[i("v-uni-image",{attrs:{src:e.thumbnail,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"video-info"},[i("v-uni-view",{staticClass:"video-title"},[t._v(t._s(e.videoTitle))]),i("v-uni-view",{staticClass:"video-class"},[1!=t.tab?i("v-uni-text",{staticStyle:{background:"#D89720",padding:"0 5px",color:"#FFFFFF","font-size":"11px","border-radius":"3px"}},[t._v(t._s(e.playTime))]):t._e(),e.gold>0?i("v-uni-text",{staticStyle:{float:"right",color:"rgba(255,154,53,1)"}},[t._v(t._s(e.gold)+" 金币")]):i("v-uni-text",{staticStyle:{float:"right",color:"#1AAD19"}},[t._v("免费")])],1),i("v-uni-view",{staticClass:"video-time"},[1==t.tab?i("v-uni-view",[i("v-uni-text",{staticStyle:{background:"#D89720",padding:"0 5px",color:"#FFFFFF","font-size":"11px","border-radius":"3px"}},[t._v(t._s(e.playTime))]),i("v-uni-text",{staticStyle:{float:"right"}},[t._v(t._s(t.utils.friendlyDate(e.addTime)))])],1):2==t.tab?i("v-uni-view",[i("v-uni-view",{staticStyle:{color:"#ff962f",width:"40%","margin-top":"2px"}},[i("v-uni-image",{staticStyle:{width:"13px",height:"13px",float:"left",margin:"3px 3px 0 0"},attrs:{src:"/static/imgs/like.png"}}),t._v(t._s(e.likes))],1),i("v-uni-text",{staticStyle:{float:"right"}},[t._v(t._s(t.utils.timeTodate("Y/m/d",e.addTime)))])],1):i("v-uni-view",{staticStyle:{"margin-top":"4px","font-size":"12px"}},[i("v-uni-text",[t._v(t._s(e.endMsg))]),i("v-uni-text",{staticStyle:{float:"right"}},[t._v(t._s(e.addTime))])],1)],1)],1)],1)})),t.isShowTig?i("v-uni-view",{staticStyle:{width:"100%",height:"500upx","margin-top":"100px","text-align":"center"}},[i("v-uni-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:"/static/empty.png"}}),i("v-uni-view",{staticStyle:{width:"100%","font-size":"25upx",color:"#999","margin-top":"30upx"}},[t._v(t._s(t.noData))])],1):t._e(),t.isMoreTig?i("v-uni-view",{staticClass:"moreTig"},[t._v("——— 我是有底线的 ———")]):t._e()],2)],1)},o=[]},d1bc:function(t,e,i){"use strict";i("d3b7"),i("e25e"),i("ac1f"),i("25f0"),i("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={friendlyDate:function(t){var e=10==t.toString().length?parseInt(t+"000"):t,i={year:"%n% 年前",month:"%n% 月前",day:"%n% 天前",hour:"%n% 小时前",minute:"%n% 分钟前",second:"%n% 秒前"},a=Date.now(),n=Math.floor((a-parseInt(e))/1e3),o=Math.floor(n/60),s=Math.floor(o/60),l=Math.floor(s/24),r=Math.floor(l/30),c=Math.floor(r/12),d="",u=0;return c>0?(d="year",u=c):r>0?(d="month",u=r):l>0?(d="day",u=l):s>0?(d="hour",u=s):o>0?(d="minute",u=o):(d="second",u=0===n?n=1:n),i[d].replace("%n%",u)},timeTodate:function(t,e){var i=10==e.toString().length?parseInt(e+"000"):e,a=new Date;a.getYear(),a.getFullYear(),a.getMonth(),a.getDate(),a.getDay(),a.getTime(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds(),a.toLocaleDateString();a.toLocaleTimeString();a.toLocaleString();var n=new Date(i),o=n.getSeconds(),s=("0"+n.getMinutes()).substr(-2),l=n.getHours()<10?"0"+n.getHours():n.getHours(),r=("0"+n.getDate()).substr(-2),c=("0"+(n.getMonth()+1)).substr(-2),d=n.getFullYear(),u="自定义替换值";return t.replace("Y",d).replace("m",c).replace("d",r).replace("H",l).replace("i",s).replace("s",o).replace("index",u)}};e.default=a},e58b:function(t,e,i){"use strict";var a=i("4ea4");i("99af"),i("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=a(i("a4c7")),s=a(i("d1bc")),l={data:function(){return{top:27,bgHeight:111,userId:0,page:1,logList:[],isShowTig:!1,isMoreTig:!1,more:!1,tab:1,utils:s.default,noData:"暂无足迹，去看部视频试试吧",isShowDel:!0,path:{url:"/pages/member/member",type:"tab"}}},onLoad:function(t){n=this,uni.showLoading({title:"加载中...",mask:!0});var e=uni.getSystemInfoSync();n.top=e.safeArea.top+7,void 0!=t.path&&(n.path=JSON.parse(t.path));var i=o.default.getLogins();!1===i?n.skipUrl():(n.userId=i.userId,n.getWatch())},mounted:function(){var t=uni.createSelectorQuery().in(this);t.select(".watch-head").boundingClientRect((function(t){n.bgHeight=t.bottom})).exec()},methods:{playVideo:function(t){uni.setStorage({key:"vid",data:t,success:function(){var t={url:"/pages/member/watch_log",t:"new"};o.default.jumpUrl("/pages/video/play?type="+JSON.stringify(t),"new")},fail:function(){o.default.showToast("服务器连接失败，请检查网络是否正常")}})},getWatch:function(){uni.request({url:o.default.apiData.getWatchLog,method:"POST",data:{userId:n.userId,page:n.page,type:n.tab},header:{"Content-type":"application/x-www-form-urlencoded"},success:function(t){var e=t.data.Data.list;n.more||(n.logList=[]),e.length>0?n.logList=n.logList.concat(e):(n.page--,n.more?n.isMoreTig=!0:n.isShowTig=!0),uni.hideLoading()},fail:function(){uni.hideLoading(),o.default.showToast("服务器连接失败，请检查网络是否正常")}})},toggle:function(t){uni.showLoading({title:"加载中...",mask:!0}),n.logList=[],n.startOpt(),n.tab=t,1==t?(n.isShowDel=!0,n.noData="挥一挥手机，不带走一部视频"):2==t?(n.isShowDel=!1,n.noData="万水千山总是情，赞部视频行不行"):(n.isShowDel=!1,n.noData="等有钱了我要买两部，看一部，扔一部"),n.getWatch()},startOpt:function(){n.page=1,n.isShowTig=!1,n.isMoreTig=!1,n.more=!1},delWatch:function(){uni.showModal({title:"提示",content:"确认要清除所有足迹吗？",cancelText:"点错了",confirmText:"一键清除",success:function(t){uni.showLoading({title:"处理中...",mask:!0}),t.confirm?uni.request({url:o.default.apiData.delWatchLog+"/type/1/userId/"+n.userId,method:"GET",header:{"Content-type":"application/x-www-form-urlencoded"},success:function(t){var e=t.data;o.default.showToast(e.Msg,2e3),200==e.Code&&(n.logList=[],n.tab=1,n.page=1,n.isShowTig=!0,n.isMoreTig=!1,n.more=!1,n.noData="挥一挥手机，不带走一部视频")},fail:function(){o.default.showToast("服务器连接失败，请检查网络是否正常")}}):t.cancel&&uni.hideLoading()}})},skipUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/pages/login/login",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;1==e?uni.reLaunch({url:t}):uni.navigateTo({url:t})}},onReachBottom:function(){n.isMoreTig||(uni.showLoading({title:"加载中...",mask:!0}),n.page++,n.more=!0,n.isShowTig=!1,n.getWatch())},onPullDownRefresh:function(){n.startOpt(),n.getWatch(),uni.stopPullDownRefresh()},onBackPress:function(t){return o.default.jumpUrl(n.path.url,n.path.type),!0}};e.default=l}}]);