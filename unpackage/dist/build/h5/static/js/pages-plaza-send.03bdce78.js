(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-plaza-send"],{"06db":function(t,n,e){var i=e("62b4");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("6aae59ac",i,!0,{sourceMap:!1,shadowMode:!1})},"1bc1":function(t,n,e){var i=e("24fb");n=i(!1),n.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  /* 上传  str */.imglistbx[data-v-6123e799]{width:95%;height:100%;padding-left:3%\n\t/*background-color: #009688; */}.imglistItem[data-v-6123e799]{position:relative;float:left;margin-bottom:%?20?%;border-radius:%?10?%}.column3[data-v-6123e799]{width:33.3%;height:%?213?%\n\t/*background-color: #007AFF; */}.column4[data-v-6123e799]{width:25%;height:%?130?%}.itemImg[data-v-6123e799]{width:90%;height:100%;margin:0 auto;display:block;border-radius:%?10?%;float:left}.cancelBtn[data-v-6123e799]{position:absolute;top:%?-10?%;right:%?8?%\n\t/*background-color: rgba(0,0,0,0.5); */\n\t/*border-radius: 50%; */}\n  /* 上传控件 */.uploadControl[data-v-6123e799]{background-color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.uploadControl uni-text[data-v-6123e799]{display:inline-block;\n\t  /*background-color: #007AFF;  */height:%?213?%;line-height:%?200?%;font-size:%?100?%;color:#999}\n  /*  上传  str end*/.clear[data-v-6123e799]{clear:both}",""]),t.exports=n},2899:function(t,n,e){"use strict";e.r(n);var i=e("ef98"),o=e("9704");for(var a in o)"default"!==a&&function(t){e.d(n,t,(function(){return o[t]}))}(a);e("5550");var s,l=e("f0c5"),u=Object(l["a"])(o["default"],i["b"],i["c"],!1,null,"86523812",null,!1,i["a"],s);n["default"]=u.exports},4550:function(t,n,e){"use strict";var i;e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return i}));var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"imglistbx"},[t._l(t.showList,(function(n,i){return e("v-uni-view",{key:i,class:["imglistItem",3==t.columnNum?"column3":"column4"]},[e("v-uni-image",{staticClass:"itemImg",attrs:{src:n,mode:"aspectFill"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.previewImage(i)}}}),t.deleteBtn?e("v-uni-icon",{staticClass:"cancelBtn",attrs:{size:"18",type:"cancel"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.deleteImg(i)}}}):t._e()],1)})),t.control&&t.showControl?e("v-uni-view",{class:["imglistItem",3==t.columnNum?"column3":"column4"],on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.uploadImg.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"itemImg uploadControl"},[e("v-uni-text",[t._v("+")])],1)],1):t._e(),e("v-uni-view",{staticClass:"clear"})],2)},a=[]},5550:function(t,n,e){"use strict";var i=e("06db"),o=e.n(i);o.a},"58a0":function(t,n,e){var i=e("1bc1");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("3ef0c43c",i,!0,{sourceMap:!1,shadowMode:!1})},"62b4":function(t,n,e){var i=e("24fb");n=i(!1),n.push([t.i,".bottom-btn[data-v-86523812]{\n\t/*background-color: #007AFF; */}.content-bottom uni-text[data-v-86523812]{display:block;margin-bottom:%?8?%}.content-bottom[data-v-86523812]{width:97%;margin:%?20?% 3%;font-size:%?24?%;color:#999}.bottom-right[data-v-86523812]{text-align:right;font-size:%?24?%;color:#999;width:97%;padding-right:3%;padding-bottom:%?15?%}.textarea uni-textarea[data-v-86523812]{width:94%;height:%?200?%;margin:0 3%;padding:%?20?% 0 %?0?%;font-size:%?26?%;color:#fff\n\t/*background-color: #007AFF; */}.textarea[data-v-86523812]{width:100%;\n\t/*height: 300upx; */background-color:hsla(0,0%,100%,.1)}.send-right-n[data-v-86523812]{display:inline-block;right:%?35?%;width:%?120?%;height:%?55?%;line-height:%?55?%;color:#888;background-color:#f8f8f8;border-radius:%?40?%;font-size:%?30?%;position:absolute;margin-top:%?8?%}.send-right-y[data-v-86523812]{display:inline-block;right:%?35?%;width:%?120?%;height:%?55?%;line-height:%?55?%;color:#fff;background-image:-webkit-linear-gradient(left,#ff8f00,rgba(254,67,101,.8));background-image:linear-gradient(90deg,#ff8f00,rgba(254,67,101,.8));border-radius:%?40?%;font-size:12px;position:absolute;margin-top:%?8?%}.content-head[data-v-86523812]{position:absolute;display:inline-block;\n\t/*background: rgba(0,0,0,0.5); */color:#ccc;left:%?35?%;margin-top:%?14?%}.head-top uni-text[data-v-86523812]{display:inline-block;width:50%;height:30px;line-height:30px;font-weight:700}.head-top[data-v-86523812]{position:fixed;top:0;left:0;width:100%;text-align:center;font-size:15px;z-index:10;background-color:#20202c;padding-bottom:%?15?%;border-bottom:1px solid #20202c;color:#fff}",""]),t.exports=n},"73ea":function(t,n,e){"use strict";e("4160"),e("fb6a"),e("a434"),e("a9e3"),e("159b"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={props:{control:{type:Boolean,default:!0},deleteBtn:{type:Boolean,default:!0},columnNum:{type:[Number,String],default:4},maxCount:{type:Number,default:4},mode:{type:Array,default:function(){return[]}}},data:function(){return{imgList:[],showList:[],showControl:!0}},watch:{mode:function(t){this.init(t)},showList:function(){this.showList.length>=this.maxCount?this.showControl=!1:this.showControl=!0}},created:function(){this.init(this.mode)},methods:{init:function(t){0==this.mode.length?this.showList=this.imgList:this.showList=t},uploadImg:function(){var t=this;uni.chooseImage({sizeType:["compressed"],count:this.maxCount,success:function(n){var e=n.tempFilePaths;e=e.slice(0,t.maxCount-t.showList.length),e.forEach((function(n){t.imgList.push(n)})),t.$emit("chooseFile",t.imgList,e)}})},deleteImg:function(t){var n=this.imgList;if(n.splice(t,1),this.mode.length>0){var e=this.showList;e.splice(t,1)}this.$emit("imgDelete",this.handleImg(),t)},previewImage:function(t){var n=this.handleImg();uni.previewImage({current:n[t],urls:n})},handleImg:function(){return this.mode.length>0?this.showList:this.imgList}}};n.default=i},7997:function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAA5CAMAAABplnnvAAAAbFBMVEUAAACFhYVtbW1sbGxtbW1tbW1tbW1sbGxvb29zc3N7e3ttbW1sbGxxcXFzc3NtbW1tbW1tbW1tbW1sbGxtbW1tbW1tbW1wcHBtbW1ubm5ubm5ubm5wcHBtbW1tbW1sbGxsbGxtbW1ubm5sbGwLfhH6AAAAI3RSTlMABPr0ce3k2CoOCsi/JBS3WvbOrqRRSEA9ODEeGWWbkIV6ZHyn+JIAAADtSURBVEjHpdXJEoIwEEVREFRURGSUySn//48WLHhsLlS1b30qJKHT7f2fJPK3yDV2LgjXWbR3Y8LVdQ5uSnBi041mygNNf3SbKJHBz52y2eDGzxeZwgcTy+Rg/JvMjUwuE5/BFDIXMN5TJqPDv2SOCZj3wvRgPjKHDky4MFcwg8w+ApPuZFowpUzQgKlk7jWY+j6bXQWmCWRKfBgyKRh/UWSDB2m5WJVURQYCVrLsiU/H9+RKMHDjhn8HVbBZT5QvVybXuOG14LszvGDsBYaugv3J0OmoZxq6L/Zx+0Tg2cJTyjzveHLyDDZMc84Pm/lKXubRRnwAAAAASUVORK5CYII="},"81e4":function(t,n,e){"use strict";e.r(n);var i=e("73ea"),o=e.n(i);for(var a in i)"default"!==a&&function(t){e.d(n,t,(function(){return i[t]}))}(a);n["default"]=o.a},"8f3f":function(t,n,e){"use strict";e.r(n);var i=e("4550"),o=e("81e4");for(var a in o)"default"!==a&&function(t){e.d(n,t,(function(){return o[t]}))}(a);e("b47d");var s,l=e("f0c5"),u=Object(l["a"])(o["default"],i["b"],i["c"],!1,null,"6123e799",null,!1,i["a"],s);n["default"]=u.exports},9704:function(t,n,e){"use strict";e.r(n);var i=e("bd9f"),o=e.n(i);for(var a in i)"default"!==a&&function(t){e.d(n,t,(function(){return i[t]}))}(a);n["default"]=o.a},b47d:function(t,n,e){"use strict";var i=e("58a0"),o=e.n(i);o.a},bd9f:function(t,n,e){"use strict";var i=e("4ea4");e("99af"),e("d81d"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a=i(e("a4c7")),s=i(e("8f3f")),l={components:{gUpload:s.default},data:function(){return{isLogin:!1,userId:0,top:0,phone:{},contentTop:35,isSend:!1,maxCount:9,maxlength:200,uploadSize:"500M",wzCount:0,control:!0,columnNum:3,imgList:[],newImgList:[],content:"",oldContent:{id:0},type:0}},onLoad:function(t){o=this,o.phone=uni.getSystemInfoSync(),o.top=o.phone.statusBarHeight,o.top=9,o.type=t.t,o.contentTop=o.top+46,0==t.t&&o.removeStorage(),uni.getStorage({key:"edit_content_"+a.default.appkey,success:function(t){o.oldContent=t.data},complete:function(){o.isUserLogin()}})},methods:{isUserLogin:function(){o.isLogin=a.default.getLogins(),o.isLogin?(o.userId=o.isLogin.userId,1==o.type&&o.oldContent.uid==o.userId&&(o.imgList=o.oldContent.allImg,o.content=o.oldContent.text,o.wzCount=o.oldContent.text.length)):o.skipUrl("/pages/login/login","new")},removeStorage:function(){uni.removeStorage({key:"edit_content_"+a.default.appkey,success:function(){}})},goPlazaIndex:function(){o.skipUrl("/pages/plaza/index","new")},uploadImg:function(){o.$refs.gUpload.uploadImg()},chooseFile:function(t,n){o.newImgList=o.newImgList.concat(n)},imgDelete:function(t,n){o.newImgList=t},uploadFileToServe:function(){if(o.newImgList.length>0)var t=o.newImgList.map((function(t,n){return{name:"imgs["+n+"]",uri:t}})),n=1;else t=[{name:"imgs[0]",uri:""}],n=0;0!=o.content.length&&(uni.showLoading({title:"发布中...",mask:!0}),uni.uploadFile({url:a.default.apiData.uploadImg,files:t,formData:{userId:o.userId,content:o.content,type:1,id:o.oldContent.id,isData:n},success:function(t){var n=JSON.parse(t.data);a.default.showToast(n.Msg,2e3),200==n.Code&&setTimeout((function(){o.goPlazaIndex()}),500)},fail:function(t){a.default.showToast("暂未开启发帖功能",2e3)}}))},send:function(){o.uploadFileToServe()},bindTextAreaBlur:function(){},sendText:function(t){var n=t.detail.value;o.wzCount=n.length,o.content=n,o.wzCount>0?o.isSend=!0:o.isSend=!1,n.length>=o.maxlength&&a.default.showToast("最多可输入"+o.maxlength+"个文字")},skipUrl:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/pages/login/login",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"new";a.default.jumpUrl(t,n)}}};n.default=l},ef98:function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return i}));var i={gUpload:e("8f3f").default},o=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"head-top",style:{"padding-top":t.top+"px"}},[i("v-uni-view",{staticClass:"content-head",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.goPlazaIndex.apply(void 0,arguments)}}},[i("v-uni-image",{staticStyle:{width:"26upx",height:"40upx"},attrs:{src:e("7997"),mode:"aspectFill"}})],1),i("v-uni-text",[t._v("发帖")]),i("v-uni-view",{class:t.isSend?"send-right-y":"send-right-n",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.send.apply(void 0,arguments)}}},[t._v("发布")])],1),i("v-uni-view",{staticClass:"textarea",style:{"margin-top":t.contentTop+"px"}},[i("v-uni-textarea",{attrs:{value:t.content,maxlength:t.maxlength,placeholder:"尬聊内容, 写在这里哦~~"},on:{blur:function(n){arguments[0]=n=t.$handleEvent(n),t.bindTextAreaBlur.apply(void 0,arguments)},input:function(n){arguments[0]=n=t.$handleEvent(n),t.sendText.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"bottom-right"},[t._v(t._s(t.wzCount)+"/"+t._s(t.maxlength))])],1),i("v-uni-view",{staticClass:"content-bottom"},[i("v-uni-text",[t._v("1. 内容不允许出现数字、英文字母；")]),i("v-uni-text",[t._v("2. 最多可添加"+t._s(t.maxCount)+"张图片。")])],1),i("v-uni-view",{staticClass:"bottom-btn"},[i("g-upload",{ref:"gUpload",attrs:{mode:t.imgList,control:t.control,maxCount:t.maxCount,columnNum:t.columnNum},on:{chooseFile:function(n){arguments[0]=n=t.$handleEvent(n),t.chooseFile.apply(void 0,arguments)},imgDelete:function(n){arguments[0]=n=t.$handleEvent(n),t.imgDelete.apply(void 0,arguments)}}})],1)],1)},a=[]}}]);